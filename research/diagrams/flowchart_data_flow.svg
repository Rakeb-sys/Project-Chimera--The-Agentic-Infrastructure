<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <style>
    .title { font: bold 18px sans-serif; }
    pre { font: 12px monospace; white-space: pre-wrap; }
    .box { fill:#f8f9fa; stroke:#333; stroke-width:1; }
  </style>
  <rect x="0" y="0" width="1200" height="800" fill="#ffffff"/>
  <text x="20" y="30" class="title">Flowchart â€” End-to-end Pipeline (Mermaid source embedded)</text>
  <foreignObject x="20" y="50" width="1160" height="720">
    <body xmlns="http://www.w3.org/1999/xhtml">
      <pre>
flowchart LR
  A[Submit Task / API] --> B[Orchestrator (MCP)]
  B --> C[Enqueue Step -> MQ]
  C --> D[Download Agent]
  D --> E{Success?}
  E -- no --> F[Mark Task Failed -> Telemetry]
  E -- yes --> G[Store Artifact -> Object Store + Artifacts Table]
  G --> H[Transcribe Agent]
  H --> I[Transcript Stored]
  I --> J[Trend Fetcher]
  J --> K[Enrich Metadata]
  K --> L[Policy Service]
  L --> M{Pass?}
  M -- no --> N[Human Review Queue -> Human Review UI]
  N --> O[Approve -> MCP]
  M -- yes --> O
  O --> P[Poster Agent]
  P --> Q[OpenClaw / External Publish]
  Q --> R[Telemetry Collector]
  R --> S[Feedback / Audit ETL -> Postgres]
      </pre>
    </body>
  </foreignObject>
</svg>
%% Database ERD Diagram
erDiagram
  ARTIFACTS {
    uuid id PK
    varchar source
    text source_url
    text media_uri
    float duration_seconds
    text checksum
    jsonb metadata
    timestamptz created_at
  }
  TRANSCRIPTS {
    uuid id PK
    uuid artifact_id FK
    varchar language
    jsonb segments
    timestamptz created_at
  }
  TASKS {
    uuid id PK
    uuid request_id
    varchar status
    jsonb pipeline
    jsonb result
    timestamptz created_at
    timestamptz updated_at
  }
  TRENDS {
    uuid id PK
    text subject
    varchar provider
    varchar metric
    numeric value
    timestamptz sampled_at
  }
  TELEMETRY_EVENTS {
    uuid id PK
    uuid request_id
    varchar event_type
    jsonb payload
    timestamptz timestamp
  }

  ARTIFACTS ||--o{ TRANSCRIPTS : "has"
  ARTIFACTS ||--o{ TASKS : "referenced_by"
  TASKS ||--o{ TELEMETRY_EVENTS : "emits"
  TRENDS }o--|| ARTIFACTS : "optional_for"
